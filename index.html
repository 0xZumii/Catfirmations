<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thank You Cat God üê±</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Courier New', monospace;
    background: #000;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding-bottom: 80px;
  }

  #container {
    position: relative;
    max-width: 95vw;
    width: 100%;
    max-height: calc(100vh - 100px);
  }

  #video {
    display: none;
  }

  #canvas {
    width: 100%;
    height: auto;
    max-height: calc(100vh - 100px);
    border: 4px solid #ff00ff;
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
    image-rendering: pixelated;
  }

  #affirmation {
    display: none;
  }

  @keyframes glow {
    0%, 100% { 
      box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
      border-color: #00ff00;
    }
    50% { 
      box-shadow: 0 0 40px rgba(0, 255, 0, 0.8);
      border-color: #00ffaa;
    }
  }

  #title {
    display: none;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }

  #controls {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 15px;
    z-index: 1000;
  }

  button {
    background: #ff00ff;
    color: #000;
    border: 3px solid #000;
    padding: 15px 30px;
    font-family: 'Courier New', monospace;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
  }

  button:hover {
    background: #00ff00;
    transform: scale(1.05);
  }

  #startScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
    color: #fff;
  }

  #startScreen h1 {
    font-size: 48px;
    color: #ff00ff;
    text-shadow: 0 0 30px #ff00ff;
    margin-bottom: 20px;
    animation: pulse 1.5s ease-in-out infinite;
    text-align: center;
    width: 100%;
    padding: 0 20px;
    max-width: 800px;
  }

  #startScreen p {
    font-size: 20px;
    color: #00ff00;
    margin-bottom: 40px;
    text-shadow: 0 0 10px #00ff00;
    text-align: center;
    width: 100%;
    padding: 0 20px;
  }

  #startBtn {
    font-size: 24px;
    padding: 20px 40px;
    background: #ff00ff;
    color: #000;
    border: 4px solid #000;
    cursor: pointer;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    transition: all 0.3s;
  }

  #startBtn:hover {
    background: #00ff00;
    transform: scale(1.1);
  }

  .hidden {
    display: none !important;
  }

  /* CRT scanline effect */
  #container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15) 0px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
    z-index: 5;
  }
</style>
</head>
<body>

<div id="startScreen">
  <h1>üê± THANK YOU CAT GOD üê±</h1>
  <p>Based Cat Affirmations Await</p>
  <button id="startBtn">ENTER</button>
</div>

<div id="container" class="hidden">
  <div id="title">üê± THANK YOU CAT GOD üê±</div>
  <video id="video" width="1280" height="960" autoplay></video>
  <canvas id="canvas" width="1280" height="960"></canvas>
  <div id="affirmation">Anything is pawsible</div>
  <div id="controls">
    <button id="saveBtn">üì∏ Save</button>
    <button id="newAffirmBtn">‚ú® New Affirmation</button>
  </div>
</div>

<script>
const video = document.getElementById('video');
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const affirmationEl = document.getElementById('affirmation');
const startScreen = document.getElementById('startScreen');
const container = document.getElementById('container');
const startBtn = document.getElementById('startBtn');
const saveBtn = document.getElementById('saveBtn');
const newAffirmBtn = document.getElementById('newAffirmBtn');

const affirmations = [
  "Anything is pawsible",
  "You're purrfect as you are",
  "Meow is the time",
  "Stay curious, stay based",
  "Nine lives, infinite potential",
  "Trust the purrcess",
  "You're one in a meowllion",
  "Fur real, you got this",
  "Paws and reflect on your greatness",
  "Life is meow or never",
  "You're the cat's whiskers",
  "Feline good, feline blessed",
  "Purrsistence pays off",
  "You're im-paws-ibly amazing",
  "Catitude is everything"
];

let currentAffirmation = 0;

// Load bee cat image
const beeCatImg = new Image();
beeCatImg.src = '/mnt/user-data/uploads/beecat.png';

// Bee cat pulse animation
let beeCatPulse = 0;

// Sparkle particles
let sparkles = [];

class Sparkle {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = Math.random() * 4 + 2;
    this.speedX = Math.random() * 2 - 1;
    this.speedY = Math.random() * 2 - 1;
    this.life = Math.random() * 100 + 100;
    this.maxLife = this.life;
    this.color = Math.random() > 0.5 ? '#ff00ff' : '#00ff00';
  }
  
  update() {
    this.x += this.speedX;
    this.y += this.speedY;
    this.life--;
    
    if (this.life <= 0 || this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.life = this.maxLife;
    }
  }
  
  draw() {
    const alpha = this.life / this.maxLife;
    ctx.fillStyle = this.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');
    ctx.fillRect(this.x, this.y, this.size, this.size);
  }
}

// Initialize sparkles
for (let i = 0; i < 50; i++) {
  sparkles.push(new Sparkle());
}

async function startCamera() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ 
      video: { 
        width: 1280, 
        height: 960 
      } 
    });
    video.srcObject = stream;
    video.play();
    requestAnimationFrame(updateCanvas);
  } catch (err) {
    alert('Camera access denied. Please allow camera access to use TYCG Mirror!');
    console.error('Camera error:', err);
  }
}

function updateCanvas() {
  // Draw mirrored video
  ctx.save();
  ctx.scale(-1, 1);
  ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
  ctx.restore();
  
  // Add subtle retro effect overlay
  ctx.fillStyle = 'rgba(255, 0, 255, 0.02)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Update and draw sparkles
  sparkles.forEach(sparkle => {
    sparkle.update();
    sparkle.draw();
  });
  
  // Draw bee cat in top left with pulse
  if (beeCatImg.complete) {
    beeCatPulse += 0.05;
    const pulseScale = 1 + Math.sin(beeCatPulse) * 0.1;
    const beeCatSize = 120;
    const beeCatX = 40;
    const beeCatY = 40;
    
    ctx.save();
    ctx.translate(beeCatX + beeCatSize/2, beeCatY + beeCatSize/2);
    ctx.scale(pulseScale, pulseScale);
    ctx.drawImage(beeCatImg, -beeCatSize/2, -beeCatSize/2, beeCatSize, beeCatSize);
    ctx.restore();
  }
  
  // Draw title at top
  ctx.save();
  ctx.font = 'bold 48px "Courier New", monospace';
  ctx.textAlign = 'center';
  ctx.fillStyle = '#000';
  ctx.fillText('üê± THANK YOU CAT GOD üê±', canvas.width / 2 + 3, 53);
  ctx.fillStyle = '#ff00ff';
  ctx.shadowColor = '#ff00ff';
  ctx.shadowBlur = 20;
  ctx.fillText('üê± THANK YOU CAT GOD üê±', canvas.width / 2, 50);
  ctx.restore();
  
  // Draw affirmation at bottom
  ctx.save();
  ctx.font = 'bold 36px "Courier New", monospace';
  ctx.textAlign = 'center';
  
  // Background box for affirmation
  const affText = affirmations[currentAffirmation];
  const metrics = ctx.measureText(affText);
  const boxWidth = metrics.width + 80;
  const boxHeight = 80;
  const boxX = (canvas.width - boxWidth) / 2;
  const boxY = canvas.height - 180;
  
  ctx.fillStyle = 'rgba(0, 0, 0, 0.85)';
  ctx.fillRect(boxX, boxY, boxWidth, boxHeight);
  ctx.strokeStyle = '#00ff00';
  ctx.lineWidth = 3;
  ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);
  
  // Affirmation text
  ctx.fillStyle = '#00ff00';
  ctx.shadowColor = '#00ff00';
  ctx.shadowBlur = 10;
  ctx.fillText(affText, canvas.width / 2, canvas.height - 130);
  ctx.restore();
  
  requestAnimationFrame(updateCanvas);
}

function changeAffirmation() {
  currentAffirmation = (currentAffirmation + 1) % affirmations.length;
  affirmationEl.textContent = affirmations[currentAffirmation];
}

function saveImage() {
  const link = document.createElement('a');
  link.download = `tycg-${Date.now()}.png`;
  link.href = canvas.toDataURL();
  link.click();
}

// Auto-rotate affirmations
setInterval(changeAffirmation, 5000);

// Event listeners
startBtn.addEventListener('click', () => {
  startScreen.classList.add('hidden');
  container.classList.remove('hidden');
  startCamera();
});

saveBtn.addEventListener('click', saveImage);
newAffirmBtn.addEventListener('click', changeAffirmation);

// Random starting affirmation
currentAffirmation = Math.floor(Math.random() * affirmations.length);
affirmationEl.textContent = affirmations[currentAffirmation];
</script>

</body>
</html>
